{% extends 'index.html' %}

{% load static %}
{% load ledger %}

{% block import %}
    {{ block.super }}

    <link rel="stylesheet" href="{% static 'blackbook/recipe.css' %}">
{% endblock import %}

{% block content %}

<article>
    <div class="title">
        <h2>{{ recipe.name }} </h2>
        <div style="flex: 1"></div>
        <a class="slim transparent vcenter button" href="{% url 'blackbook:recipe_edit' recipe.pk %}">{% icon "pencil" %}</a>
    </div>
    <p>
        {{ recipe.description }}
    </p>

    <div class="traits">
        {% icon recipe.serving_glass.name|lower %}
        {% icon recipe.method.name|lower %}

        <div style="flex:1"></div>

        {% if recipe.product is not None %}
        {{ recipe.product.cost|money }}
        {{ recipe.product.member_cost|money }}
        {% endif %}
    </div>

    <ol>
        {% for step in recipe.steps.all %}
        <li>
            <span class="amount">{{ step.amount }}</span>
            {% if step.ingredient is not None %}
                <span class="ingredient {{ step.ingredient.category.name|default_if_none:""|lower }}">{{ step.ingredient.name }}</span>
            {% endif %}
            <span class="instruction">{{ step.instruction }}</span>
        </li>
        {% endfor %}
    </ol>
</article>

{% endblock content %}