{% extends 'ledger/snippets/grouped_item_grid.html' %}

{% load static %}
{% load ledger %}
{% load i18n %}


{% block item %}
{% with account=item %}
{% with current_balance=account.current_balance %}

{% if url %}
	<a href="{% url url account.pk %}"
	class="item"
	data-account-id={{ account.pk }}
	data-balance={{ current_balance }}
	data-credit={{ account.credit }}
	{% if account.member %}data-member{% endif %}
	{% if current_balance|add:account.credit <= 0 %}blocked{% endif %}
	{% if selected.pk == account.pk %}selected{% endif %}>

		<h4 class="name">
			{% if account.member %}
			<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="badge lucide lucide-settings"><mask id="check-mask"><rect x="0" y="0" width="24" height="24" fill="white" /><path stroke="black" fill="none" d="m9 12 2 2 4-4"/></mask><path mask="url(#check-mask)" fill="currentColor" d="m 17.65,6.16 c -0.618802,0.3572656 -1.381198,0.3572656 -2,0 L 15.22,5.91 C 14.601832,5.553101 14.220732,4.8937984 14.22,4.18 V 2 H 9.78 v 2.18 c -7.321e-4,0.7137984 -0.3818319,1.373101 -1,1.73 L 8.35,6.16 c -0.6188022,0.3572656 -1.3811978,0.3572656 -2,0 L 4.4369973,5.1397319 2.3129114,8.8086076 4.13,10.02 c 0.6150891,0.355105 0.9957131,1.009778 1,1.72 v 0.51 c 0.00285,0.71737 -0.3787316,1.381318 -1,1.74 L 2.2651563,15.108906 4.4369973,18.860268 6.35,17.84 c 0.6188022,-0.357266 1.3811978,-0.357266 2,0 l 0.43,0.25 c 0.6181681,0.356899 0.9992679,1.016202 1,1.73 V 22 h 4.44 v -2.18 c 7.32e-4,-0.713798 0.381832,-1.373101 1,-1.73 l 0.43,-0.25 c 0.618802,-0.357266 1.381198,-0.357266 2,0 L 19.582063,18.870434 21.765007,15.00067 19.87,13.99 c -0.621268,-0.358682 -1.002848,-1.02263 -1,-1.74 v -0.5 c -0.0028,-0.71737 0.378732,-1.381318 1,-1.74 L 21.734844,8.8910938 19.563003,5.1397319 Z"/></svg>
			{% endif %}
			{{ account.display_name }}</h4>
		{{ current_balance|money }}
		{% if show_credit %}<span class="credit">{% translate "Credit" %}: {{ account.credit|money }}</span>{% endif %}

	</a>
{% else %}
	<label
	class="item"
	data-account-id={{ account.pk }}
	data-balance={{ current_balance }}
	data-credit={{ account.credit }}
	{% if account.member %}data-member{% endif %}
	{% if current_balance|add:account.credit <= 0 %}blocked{% endif %}>

		<h4 class="name">
			<input
				type="radio"
				name="account"
				value="{{ account.pk }}"
				autocomplete="off"
				{% if selected.pk == account.pk %}checked{% endif %}
				{% if target_form %}form="{{ target_form }}"{% endif %}
				{% if current_balance|add:account.credit <= 0 %}disabled{% endif %}>
				{% if account.member %}
			<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="badge lucide lucide-settings"><mask id="check-mask"><rect x="0" y="0" width="24" height="24" fill="white" /><path stroke="black" fill="none" d="m9 12 2 2 4-4"/></mask><path mask="url(#check-mask)" fill="currentColor" d="m 17.65,6.16 c -0.618802,0.3572656 -1.381198,0.3572656 -2,0 L 15.22,5.91 C 14.601832,5.553101 14.220732,4.8937984 14.22,4.18 V 2 H 9.78 v 2.18 c -7.321e-4,0.7137984 -0.3818319,1.373101 -1,1.73 L 8.35,6.16 c -0.6188022,0.3572656 -1.3811978,0.3572656 -2,0 L 4.4369973,5.1397319 2.3129114,8.8086076 4.13,10.02 c 0.6150891,0.355105 0.9957131,1.009778 1,1.72 v 0.51 c 0.00285,0.71737 -0.3787316,1.381318 -1,1.74 L 2.2651563,15.108906 4.4369973,18.860268 6.35,17.84 c 0.6188022,-0.357266 1.3811978,-0.357266 2,0 l 0.43,0.25 c 0.6181681,0.356899 0.9992679,1.016202 1,1.73 V 22 h 4.44 v -2.18 c 7.32e-4,-0.713798 0.381832,-1.373101 1,-1.73 l 0.43,-0.25 c 0.618802,-0.357266 1.381198,-0.357266 2,0 L 19.582063,18.870434 21.765007,15.00067 19.87,13.99 c -0.621268,-0.358682 -1.002848,-1.02263 -1,-1.74 v -0.5 c -0.0028,-0.71737 0.378732,-1.381318 1,-1.74 L 21.734844,8.8910938 19.563003,5.1397319 Z"/></svg>
			{% endif %}
			{{ account.display_name }}
		</h4>
		{{ current_balance|money }}
		{% if show_credit %}<span class="credit">{% translate "Credit" %}: {{ account.credit|money }}</span>{% endif %}
		
</label>
{% endif %}

{% endwith %}
{% endwith %}
{% endblock item %}

{% block unnamed_items %}
{% if create_account %}
<a href="{% url 'account_create' %}" class="item new">
	<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-plus"><path d="M5 12h14"/><path d="M12 5v14"/></svg>
</a>
{% endif %}
{% endblock unnamed_items %}
